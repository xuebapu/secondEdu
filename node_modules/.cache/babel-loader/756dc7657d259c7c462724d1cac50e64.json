{"remainingRequest":"D:\\webStromAllSpace\\secondEdu\\node_modules\\babel-loader\\lib\\index.js!D:\\webStromAllSpace\\secondEdu\\src\\store\\modules\\user.js","dependencies":[{"path":"D:\\webStromAllSpace\\secondEdu\\src\\store\\modules\\user.js","mtime":1610964953749},{"path":"D:\\webStromAllSpace\\secondEdu\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\webStromAllSpace\\secondEdu\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCB7IGdldFRva2VuLCBzZXRUb2tlbiwgcmVtb3ZlVG9rZW4gfSBmcm9tICdAL3V0aWxzL2F1dGgnOwppbXBvcnQgeyBsb2dpbiBhcyBfbG9naW4sIHVzZXJJbmZvIGFzIF91c2VySW5mbywgbG9nb3V0IGFzIF9sb2dvdXQgfSBmcm9tICdAL2FwaS91c2VyJzsKaW1wb3J0IHsgTWVzc2FnZUJveCwgTWVzc2FnZSB9IGZyb20gJ2VsZW1lbnQtdWknOwp2YXIgc3RhdGUgPSB7CiAgdG9rZW46IGdldFRva2VuKCksCiAgdXNlckluZm86IHt9Cn07CnZhciBtdXRhdGlvbnMgPSB7CiAgU0VUX1RPS0VOOiBmdW5jdGlvbiBTRVRfVE9LRU4oc3RhdGUsIHRva2VuKSB7CiAgICBzdGF0ZS50b2tlbiA9IHRva2VuOwogIH0sCiAgU0VUX1VTRVJJTkZPOiBmdW5jdGlvbiBTRVRfVVNFUklORk8oc3RhdGUsIGRhdGEpIHsKICAgIHN0YXRlLnVzZXJJbmZvID0gZGF0YTsKICB9Cn07CnZhciBhY3Rpb25zID0gewogIGxvZ2luOiBmdW5jdGlvbiBsb2dpbihfcmVmLCB1c2VySW5mbykgewogICAgdmFyIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgX2xvZ2luKHVzZXJJbmZvKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwoKICAgICAgICBpZiAocmVzLmNvZGUgPT0gMjAwKSB7CiAgICAgICAgICBNZXNzYWdlKHsKICAgICAgICAgICAgbWVzc2FnZTogJ+eZu+W9leaIkOWKnycsCiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJwogICAgICAgICAgfSk7CiAgICAgICAgICB2YXIgZGF0YSA9IHJlcy5kYXRhOwogICAgICAgICAgY29tbWl0KCJTRVRfVE9LRU4iLCBkYXRhLnRva2VuKTsKICAgICAgICAgIHNldFRva2VuKGRhdGEudG9rZW4pOwogICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBNZXNzYWdlLmVycm9yKHJlcy5tc2cpOwogICAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgIH0pOwogICAgfSk7CiAgfSwKICB1c2VySW5mbzogZnVuY3Rpb24gdXNlckluZm8oX3JlZjIpIHsKICAgIHZhciBjb21taXQgPSBfcmVmMi5jb21taXQ7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICBfdXNlckluZm8oKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICB2YXIgZGF0YSA9IHJlcy5kYXRhOwogICAgICAgIGNvbW1pdCgiU0VUX1VTRVJJTkZPIiwgZGF0YSk7CiAgICAgICAgcmVzb2x2ZShkYXRhKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgfSk7CiAgICB9KTsKICB9LAogIGxvZ291dDogZnVuY3Rpb24gbG9nb3V0KF9yZWYzKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjMuY29tbWl0OwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgX2xvZ291dCgpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGNvbW1pdCgiU0VUX1RPS0VOIiwgIiIpOwogICAgICAgIGNvbW1pdCgiU0VUX1VTRVJJTkZPIiwgIiIpOwogICAgICAgIHJlbW92ZVRva2VuKCk7CiAgICAgICAgcmVzb2x2ZSgpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICB9KTsKICAgIH0pOwogIH0sCiAgcmVzZXRUb2tlbjogZnVuY3Rpb24gcmVzZXRUb2tlbihfcmVmNCkgewogICAgdmFyIGNvbW1pdCA9IF9yZWY0LmNvbW1pdDsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIF9sb2dvdXQoKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBjb21taXQoIlNFVF9UT0tFTiIsICIiKTsKICAgICAgICBjb21taXQoIlNFVF9VU0VSSU5GTyIsICIiKTsKICAgICAgICByZW1vdmVUb2tlbigpOwogICAgICAgIHJlc29sdmUoKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgfSk7CiAgICB9KTsKICB9Cn07CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lc3BhY2VkOiB0cnVlLAogIHN0YXRlOiBzdGF0ZSwKICBtdXRhdGlvbnM6IG11dGF0aW9ucywKICBhY3Rpb25zOiBhY3Rpb25zCn07"},{"version":3,"sources":["D:/webStromAllSpace/secondEdu/src/store/modules/user.js"],"names":["getToken","setToken","removeToken","login","userInfo","logout","MessageBox","Message","state","token","mutations","SET_TOKEN","SET_USERINFO","data","actions","commit","Promise","resolve","reject","then","res","console","log","code","message","type","error","msg","catch","resetToken","namespaced"],"mappings":"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","sourcesContent":["import { getToken, setToken, removeToken } from '@/utils/auth'\r\nimport { login, userInfo, logout } from '@/api/user'\r\nimport { MessageBox, Message } from 'element-ui'\r\nconst state = {\r\n    token: getToken(),\r\n    userInfo: {}\r\n}\r\n\r\nconst mutations = {\r\n    SET_TOKEN: (state, token) => {\r\n        state.token = token;\r\n    },\r\n    SET_USERINFO: (state, data) => {\r\n        state.userInfo = data;\r\n    }\r\n}\r\nconst actions = {\r\n    login( { commit }, userInfo){\r\n        return new Promise( (resolve, reject) => {\r\n            login(userInfo).then( res => {\r\n                console.log(res)\r\n                if(res.code==200){\r\n                    Message({\r\n                        message:'登录成功',\r\n                        type:'success'\r\n                    })\r\n                    const data = res.data;\r\n                    commit(\"SET_TOKEN\", data.token);\r\n                    setToken(data.token);\r\n                    resolve();\r\n                }else{\r\n                    Message.error(res.msg)\r\n                    reject(error);\r\n                }\r\n            }).catch( error => {\r\n                reject(error);\r\n            })\r\n        })\r\n    },\r\n    userInfo({ commit }){\r\n        return new Promise ( (resolve, reject) => {\r\n            userInfo().then( res => {\r\n                const data = res.data;\r\n                commit(\"SET_USERINFO\", data);\r\n                resolve(data);\r\n            }).catch( error => {\r\n                reject(error);\r\n            })\r\n        })\r\n    },\r\n    logout( {commit }){\r\n        return new Promise ( (resolve, reject) => {\r\n            logout().then( res => {\r\n                commit(\"SET_TOKEN\", \"\");\r\n                commit(\"SET_USERINFO\", \"\")\r\n                removeToken();\r\n                resolve();\r\n            }).catch( error => {\r\n                reject(error);\r\n            })\r\n        })\r\n    },\r\n    resetToken({ commit }){\r\n        return new Promise ( (resolve, reject) => {\r\n            logout().then( res => {\r\n                commit(\"SET_TOKEN\", \"\");\r\n                commit(\"SET_USERINFO\", \"\")\r\n                removeToken();\r\n                resolve();\r\n            }).catch( error => {\r\n                reject(error);\r\n            })\r\n        })\r\n    }\r\n}\r\n\r\nexport default {\r\n    namespaced: true,\r\n    state,\r\n    mutations,\r\n    actions,\r\n}"]}]}