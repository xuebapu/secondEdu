{"remainingRequest":"D:\\webStromAllSpace\\secondEdu\\node_modules\\babel-loader\\lib\\index.js!D:\\webStromAllSpace\\secondEdu\\src\\utils\\request.js","dependencies":[{"path":"D:\\webStromAllSpace\\secondEdu\\src\\utils\\request.js","mtime":1610964953803},{"path":"D:\\webStromAllSpace\\secondEdu\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\webStromAllSpace\\secondEdu\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCB7IE1lc3NhZ2VCb3gsIE1lc3NhZ2UgfSBmcm9tICdlbGVtZW50LXVpJzsKaW1wb3J0IHN0b3JlIGZyb20gJ0Avc3RvcmUnOwppbXBvcnQgcm91dGVyIGZyb20gJy4uL3JvdXRlci9pbmRleCc7CnZhciBzZXJ2aWNlID0gYXhpb3MuY3JlYXRlKHsKICBiYXNlVVJMOiBwcm9jZXNzLmVudi5WVUVfQVBQX0JBU0VfQVBJLAogIHRpbWVvdXQ6IDIwMDAwCn0pOwpzZXJ2aWNlLmRlZmF1bHRzLmhlYWRlcnMucG9zdFsnQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7CnNlcnZpY2UuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKGZ1bmN0aW9uIChjb25maWcpIHsKICBpZiAoc3RvcmUuZ2V0dGVycy50b2tlbikgewogICAgY29uZmlnLmhlYWRlcnNbJ0F1dGhvcml6YXRpb24nXSA9IHN0b3JlLmdldHRlcnMudG9rZW47CiAgfQoKICByZXR1cm4gY29uZmlnOwp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9KTsKc2VydmljZS5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKGZ1bmN0aW9uIChyZXNwb25zZSkgewogIHZhciByZXMgPSByZXNwb25zZS5kYXRhOwoKICBpZiAocmVzLmNvZGUgIT0gMjAwKSB7CiAgICAvLyBNZXNzYWdlKHsKICAgIC8vICAgICBtZXNzYWdlOiByZXMubXNnIHx8ICLor7fmsYLlpLHotKUiLAogICAgLy8gICAgIHR5cGU6ICdlcnJvcicsCiAgICAvLyAgICAgZHVyYXRpb246IDI1MDAKICAgIC8vIH0pCiAgICBpZiAocmVzLmNvZGUgPT09IDQwMSkgewogICAgICBNZXNzYWdlQm94LmFsZXJ0KCLnmbvlvZXlt7Lov4fmnJ/vvIzor7fph43mlrDnmbvlvZUiLCAi5o+Q56S6IiwgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAi6YeN5paw55m75b2VIiwKICAgICAgICB0eXBlOiAnd2FybmluZycsCiAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIGNhbGxiYWNrKCkgewogICAgICAgICAgc3RvcmUuZGlzcGF0Y2goInVzZXIvcmVzZXRUb2tlbiIpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICByb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgbmFtZTogJ+S4u+mhtScsCiAgICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgICBsb2c6IHRydWUKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0gZWxzZSBpZiAocmVzLmNvZGUgPT0gNTAwKSB7CiAgICAgIHJldHVybiByZXM7CiAgICB9IGVsc2UgaWYgKHJlcy5jb2RlID09IDU2NykgewogICAgICByZXR1cm4gcmVzOwogICAgfSBlbHNlIGlmIChyZXMuY29kZSA9PSA2NzgpIHsKICAgICAgcmV0dXJuIHJlczsKICAgIH0gZWxzZSBpZiAocmVzLmNvZGUgPT0gMTAxKSB7CiAgICAgIHJldHVybiByZXM7CiAgICB9IGVsc2UgaWYgKHJlcy5jb2RlID09IDEwMikgewogICAgICByZXR1cm4gcmVzOwogICAgfQoKICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IocmVzLm1zZyB8fCAi6K+35rGC5aSx6LSlIikpOwogIH0gZWxzZSB7CiAgICByZXR1cm4gcmVzOwogIH0KfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgY29uc29sZS5sb2coZXJyb3IpOyAvLyBNZXNzYWdlKHsKICAvLyAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSwKICAvLyAgICAgdHlwZTogJ2Vycm9yJywKICAvLyAgICAgZHVyYXRpb246IDUgKiAxMDAwCiAgLy8gfSkKCiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKfSk7CmV4cG9ydCBkZWZhdWx0IHNlcnZpY2U7"},{"version":3,"sources":["D:/webStromAllSpace/secondEdu/src/utils/request.js"],"names":["axios","MessageBox","Message","store","router","service","create","baseURL","process","env","VUE_APP_BASE_API","timeout","defaults","headers","post","interceptors","request","use","config","getters","token","error","Promise","reject","response","res","data","code","alert","confirmButtonText","type","callback","dispatch","then","push","name","params","log","Error","msg","console"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,EAAqBC,OAArB,QAAoC,YAApC;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,OAAOC,MAAP,MAAmB,iBAAnB;AACA,IAAMC,OAAO,GAAIL,KAAK,CAACM,MAAN,CAAa;AAC1BC,EAAAA,OAAO,EAAEC,OAAO,CAACC,GAAR,CAAYC,gBADK;AAE1BC,EAAAA,OAAO,EAAE;AAFiB,CAAb,CAAjB;AAIAN,OAAO,CAACO,QAAR,CAAiBC,OAAjB,CAAyBC,IAAzB,CAA8B,cAA9B,IAAgD,kBAAhD;AAEAT,OAAO,CAACU,YAAR,CAAqBC,OAArB,CAA6BC,GAA7B,CACI,UAAAC,MAAM,EAAI;AACN,MAAGf,KAAK,CAACgB,OAAN,CAAcC,KAAjB,EAAuB;AACnBF,IAAAA,MAAM,CAACL,OAAP,CAAe,eAAf,IAAkCV,KAAK,CAACgB,OAAN,CAAcC,KAAhD;AACH;;AACD,SAAOF,MAAP;AACH,CANL,EAOI,UAAAG,KAAK,EAAG;AACJ,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACH,CATL;AAYAhB,OAAO,CAACU,YAAR,CAAqBS,QAArB,CAA8BP,GAA9B,CACI,UAAAO,QAAQ,EAAI;AACR,MAAMC,GAAG,GAAGD,QAAQ,CAACE,IAArB;;AACA,MAAGD,GAAG,CAACE,IAAJ,IAAY,GAAf,EAAmB;AACf;AACA;AACA;AACA;AACA;AACA,QAAGF,GAAG,CAACE,IAAJ,KAAa,GAAhB,EAAoB;AAChB1B,MAAAA,UAAU,CAAC2B,KAAX,CAAiB,aAAjB,EAAgC,IAAhC,EAAsC;AAClCC,QAAAA,iBAAiB,EAAE,MADe;AAElCC,QAAAA,IAAI,EAAE,SAF4B;AAGlCC,QAAAA,QAAQ,EAAE,oBAAM;AACZ5B,UAAAA,KAAK,CAAC6B,QAAN,CAAe,iBAAf,EAAkCC,IAAlC,CAAuC,YAAM;AACzC7B,YAAAA,MAAM,CAAC8B,IAAP,CAAY;AACRC,cAAAA,IAAI,EAAC,IADG;AAERC,cAAAA,MAAM,EAAC;AAACC,gBAAAA,GAAG,EAAC;AAAL;AAFC,aAAZ;AAIH,WALD;AAMH;AAViC,OAAtC;AAYH,KAbD,MAaM,IAAGZ,GAAG,CAACE,IAAJ,IAAU,GAAb,EAAiB;AACnB,aAAOF,GAAP;AACH,KAFK,MAGD,IAAGA,GAAG,CAACE,IAAJ,IAAU,GAAb,EAAiB;AAClB,aAAOF,GAAP;AACH,KAFI,MAGA,IAAGA,GAAG,CAACE,IAAJ,IAAU,GAAb,EAAiB;AAClB,aAAOF,GAAP;AACH,KAFI,MAGA,IAAGA,GAAG,CAACE,IAAJ,IAAU,GAAb,EAAiB;AAClB,aAAOF,GAAP;AACH,KAFI,MAGA,IAAGA,GAAG,CAACE,IAAJ,IAAU,GAAb,EAAiB;AAClB,aAAOF,GAAP;AACH;;AACD,WAAOH,OAAO,CAACC,MAAR,CAAe,IAAIe,KAAJ,CAAUb,GAAG,CAACc,GAAJ,IAAW,MAArB,CAAf,CAAP;AACH,GAnCD,MAmCK;AACD,WAAOd,GAAP;AACH;AACJ,CAzCL,EA0CI,UAAAJ,KAAK,EAAG;AACJmB,EAAAA,OAAO,CAACH,GAAR,CAAYhB,KAAZ,EADI,CAEJ;AACA;AACA;AACA;AACA;;AACA,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACH,CAlDL;AAoDA,eAAehB,OAAf","sourcesContent":["import axios from 'axios'\r\nimport { MessageBox, Message } from 'element-ui'\r\nimport store from '@/store';\r\nimport router from '../router/index'\r\nconst service =  axios.create({\r\n    baseURL: process.env.VUE_APP_BASE_API,\r\n    timeout: 20000 \r\n})\r\nservice.defaults.headers.post['Content-Type'] = 'application/json'\r\n\r\nservice.interceptors.request.use(\r\n    config => {\r\n        if(store.getters.token){\r\n            config.headers['Authorization'] = store.getters.token;\r\n        }\r\n        return config\r\n    },\r\n    error =>{\r\n        return Promise.reject(error)\r\n    }\r\n)\r\n\r\nservice.interceptors.response.use(\r\n    response => {\r\n        const res = response.data;\r\n        if(res.code != 200){\r\n            // Message({\r\n            //     message: res.msg || \"请求失败\",\r\n            //     type: 'error',\r\n            //     duration: 2500\r\n            // })\r\n            if(res.code === 401){\r\n                MessageBox.alert(\"登录已过期，请重新登录\", \"提示\", {\r\n                    confirmButtonText: \"重新登录\",\r\n                    type: 'warning',\r\n                    callback: () => {\r\n                        store.dispatch(\"user/resetToken\").then(() => {\r\n                            router.push({\r\n                                name:'主页',\r\n                                params:{log:true}\r\n                            })\r\n                        })\r\n                    }\r\n                })\r\n            }else if(res.code==500){\r\n                return res\r\n            }\r\n            else if(res.code==567){\r\n                return res\r\n            }\r\n            else if(res.code==678){\r\n                return res\r\n            }\r\n            else if(res.code==101){\r\n                return res\r\n            }\r\n            else if(res.code==102){\r\n                return res\r\n            }\r\n            return Promise.reject(new Error(res.msg || \"请求失败\"))\r\n        }else{\r\n            return res\r\n        }\r\n    },\r\n    error =>{\r\n        console.log(error)\r\n        // Message({\r\n        //     message: error.message,\r\n        //     type: 'error',\r\n        //     duration: 5 * 1000\r\n        // })\r\n        return Promise.reject(error)\r\n    }\r\n)\r\nexport default service"]}]}