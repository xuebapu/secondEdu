{"remainingRequest":"D:\\webStromAllSpace\\secondEdu\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\webStromAllSpace\\secondEdu\\src\\views\\order\\payOrder.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\webStromAllSpace\\secondEdu\\src\\views\\order\\payOrder.vue","mtime":1610964953833},{"path":"D:\\webStromAllSpace\\secondEdu\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\webStromAllSpace\\secondEdu\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\webStromAllSpace\\secondEdu\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\webStromAllSpace\\secondEdu\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBxdWVyeVBheSwgZ2V0T3JkZXJEZXRpYWxzLHBheU9yZGVyIH0gZnJvbSAiLi4vLi4vYXBpL29yZGVyIjsNCmV4cG9ydCBkZWZhdWx0IHsNCiAgY29tcG9uZW50czogew0KICAgIGxpc3Q6IChyZXNvbHZlKSA9PiByZXF1aXJlKFsiLi9jb21wb25lbnQvbGlzdCJdLCByZXNvbHZlKSwNCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLm51bSA9IHRoaXMuJHJvdXRlLnF1ZXJ5Lm51bTsNCiAgICB0aGlzLmdldExpc3QoKTsNCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgcGF5U2hvdzogZmFsc2UsDQogICAgICByZXN1bHRCYWNrOiBmYWxzZSwNCiAgICAgIG9yZGVyRmFsc2U6ZmFsc2UsDQogICAgICBudW06ICIiLA0KICAgICAgc3RlcDogMSwNCiAgICAgIHR5cGU6IDEwMSwNCiAgICAgIGxpc3Q6IFtdLCAvL+WVhuWTgeWIl+ihqA0KICAgICAgZGV0YWlsczogW10sDQogICAgICB3eENvZGU6JycsDQogICAgfTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIC8v5pSv5LuY5a6M5oiQ5qOA5rWLDQogICAgcGF5Q2hlY2soKXsNCiAgICAgIGxldCBvYmo9ew0KICAgICAgICBvcmRlck51bTp0aGlzLm51bSwNCiAgICAgICAgcGF5VHlwZTp0aGlzLnR5cGUNCiAgICAgIH0NCiAgICAgIHF1ZXJ5UGF5KG9iaikudGhlbigocmVzKSA9PiB7DQogICAgICAgIGNvbnNvbGUubG9nKHJlcyk7DQogICAgICAgIGlmIChyZXMuY29kZT09MjAwKSB7DQogICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7DQogICAgICAgICAgIHBhdGg6Jy9wYXlGaW5pc2gnLA0KICAgICAgICAgICBxdWVyeTp7DQogICAgICAgICAgICAgb3V0X3RyYWRlX25vOnRoaXMuZGV0YWlscy5vcmRlck51bQ0KICAgICAgICAgICB9DQogICAgICAgICB9KSAgICAgIA0KICAgICAgICB9DQogICAgICAgICBlbHNlIHsgDQogICAgICAgICAgdGhpcy5vcmRlckZhbHNlPXRydWU7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0sDQogICAgLy/mlK/ku5jmlrnlvI8NCiAgICBjaG9zZVR5cGUoeCkgew0KICAgICAgdGhpcy50eXBlID0geDsNCiAgICB9LA0KICAgIGdldExpc3QoKSB7DQogICAgICB0aGlzLnJlc3VsdEJhY2sgPSBmYWxzZTsNCiAgICAgIGdldE9yZGVyRGV0aWFscyh0aGlzLm51bSkudGhlbigocmVzKSA9PiB7DQogICAgICAgIGNvbnNvbGUubG9nKHJlcyk7DQogICAgICAgIHRoaXMucmVzdWx0QmFjayA9IHRydWU7DQogICAgICAgIGlmIChyZXMuY29kZSA9PSAyMDApIHsNCiAgICAgICAgICB0aGlzLmRldGFpbHMgPSByZXMuZGF0YTsNCiAgICAgICAgICB0aGlzLmxpc3RbMF0gPXsNCiAgICAgICAgICAgICAgcGljdHVyZTogcmVzLmRhdGEucHJvamVjdFBpY3R1cmUsDQogICAgICAgICAgICAgIG5hbWU6IHJlcy5kYXRhLnByb2plY3ROYW1lLA0KICAgICAgICAgICAgICBwcmljZTogcmVzLmRhdGEucHJvamVjdFByaWNlLA0KICAgICAgICAgICAgfTsNCiAgICAgICAgICANCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLmxpc3QgPSBbXTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSwNCiAgICAvL+aPkOS6pOiuouWNlQ0KICAgIHBheSgpIHsNCiAgICAgIHRoaXMucGF5U2hvdz10cnVlDQogICAgICBsZXQgb2JqPXsNCiAgICAgICAgb3JkZXJOdW06dGhpcy5udW0sDQogICAgICAgIHBheVR5cGU6dGhpcy50eXBlDQogICAgICB9DQogICAgICBwYXlPcmRlcihvYmopLnRoZW4ocmVzPT57DQogICAgICAgIGlmKHJlcy5jb2RlPT0xMDEpew0KICAgICAgICBsZXQgcm91dGVyRGF0YSA9IHRoaXMuJHJvdXRlci5yZXNvbHZlKHtwYXRoOicvcGF5SHRtbCcscXVlcnk6eyBodG1sRGF0YTogcmVzLmRhdGF9fSkNCiAgICAgLy8g5omT5byA5paw6aG16Z2iDQogICAgICB3aW5kb3cub3Blbihyb3V0ZXJEYXRhLmhyZWYsICdfIGJsYW5rJykNCiAgICAgICAgfWVsc2UgaWYocmVzLmNvZGU9PTEwMil7DQogICAgICAgICAgdGhpcy53eENvZGU9cmVzLmRhdGENCiAgICAgICAgfQ0KICAgICAgICBjb25zb2xlLmxvZyhyZXMpDQogICAgICB9KQ0KICAgIH0sDQogIH0sDQp9Ow0K"},{"version":3,"sources":["payOrder.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"payOrder.vue","sourceRoot":"src/views/order","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"orderTop\">\r\n      <div class=\"step\">\r\n        <el-steps :active=\"step\" finish-status=\"success\">\r\n          <el-step title=\"确认订单\"></el-step>\r\n          <el-step title=\"支付中心\"></el-step>\r\n          <el-step title=\"订单完成\"></el-step>\r\n        </el-steps>\r\n      </div>\r\n    </div>\r\n    <div class=\"orderCon\" v-if=\"resultBack\">\r\n      <div class=\"con\">\r\n        <div class=\"title\">\r\n          <p class=\"good-info\">订单：{{details?details.orderNum:''}}</p>\r\n        </div>\r\n        <div class=\"courseList\">\r\n          <list :list=\"list\"></list>\r\n        </div>\r\n        <div class=\"payWayTitle\">\r\n          <p>支付方式</p>\r\n        </div>\r\n        <div class=\"payWay\">\r\n          <div @click=\"choseType(101)\" class=\"alipay item\" :class=\"type==101?'active':''\">\r\n            <div class=\"bottomRight\">\r\n              <i class=\"right\"></i>\r\n            </div>\r\n          </div>\r\n          <div @click=\"choseType(102)\" class=\"weChat item\" :class=\"type==102?'active':''\">\r\n            <div class=\"bottomRight\">\r\n              <i class=\"right\"></i>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"orderSubmit\">\r\n          <div class=\"leftPayWay\"></div>\r\n          <div class=\"rightSub\">\r\n            <div class=\"row\">\r\n              <div class=\"final-total\">应付金额：</div>\r\n              <div class=\"final-price\">￥{{details?details.projectPrice.toFixed(2):0}}</div>\r\n            </div>\r\n            <div class=\"sub\">\r\n              <button @click=\"pay\">立即支付</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- 遮罩层 -->\r\n    <div class=\"loading\" v-if=\"payShow\">\r\n      <div class=\"alipay\" v-show=\"type==101\">\r\n        <div class=\"wait-img\">\r\n          <img :src=\"require('../../assets/59.png')\" alt />\r\n        </div>\r\n        <h3>等待您完成支付...</h3>\r\n        <p v-show=\"!orderFalse\" class=\"tip\">请在支付页面继续完成支付</p>\r\n        <p v-show=\"orderFalse\" class=\"tip\" style=\"color:red\">订单支付失败,请重新选择支付方式</p>\r\n        <div class=\"payBtn\">\r\n          <button @click=\"payCheck\" class=\"success-btn\">支付完成</button>\r\n        </div>\r\n        <div class=\"payRechoose\" @click=\"payShow=false;orderFalse=false\">\r\n          <i class=\"el-icon-refresh-left\"></i>\r\n          重新选择支付方式\r\n        </div>\r\n      </div>\r\n      <div class=\"weChatPay\" v-show=\"type==102\">\r\n        <h1 class=\"price\">微信支付￥{{details.projectPrice.toFixed(2)}}</h1>\r\n        <div class=\"img-code\">\r\n          <img :src=\"'data:image/png;base64,'+wxCode\" alt />\r\n        </div>\r\n        <p>使用微信扫描二维码进行支付</p>\r\n         <p v-show=\"orderFalse\" class=\"tip\" style=\"color:red\">订单支付失败,请重新选择支付方式</p>\r\n         <div class=\"payBtn\">\r\n          <button @click=\"payCheck\" class=\"success-btn\">支付完成</button>\r\n        </div>\r\n        <div class=\"payRechoose\" @click=\"payShow=false;orderFalse=false\">\r\n          <i class=\"el-icon-refresh-left\"></i>\r\n          重新选择支付方式\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { queryPay, getOrderDetials,payOrder } from \"../../api/order\";\r\nexport default {\r\n  components: {\r\n    list: (resolve) => require([\"./component/list\"], resolve),\r\n  },\r\n  created() {\r\n    this.num = this.$route.query.num;\r\n    this.getList();\r\n  },\r\n  data() {\r\n    return {\r\n      payShow: false,\r\n      resultBack: false,\r\n      orderFalse:false,\r\n      num: \"\",\r\n      step: 1,\r\n      type: 101,\r\n      list: [], //商品列表\r\n      details: [],\r\n      wxCode:'',\r\n    };\r\n  },\r\n  methods: {\r\n    //支付完成检测\r\n    payCheck(){\r\n      let obj={\r\n        orderNum:this.num,\r\n        payType:this.type\r\n      }\r\n      queryPay(obj).then((res) => {\r\n        console.log(res);\r\n        if (res.code==200) {\r\n         this.$router.push({\r\n           path:'/payFinish',\r\n           query:{\r\n             out_trade_no:this.details.orderNum\r\n           }\r\n         })      \r\n        }\r\n         else { \r\n          this.orderFalse=true;\r\n        }\r\n      });\r\n    },\r\n    //支付方式\r\n    choseType(x) {\r\n      this.type = x;\r\n    },\r\n    getList() {\r\n      this.resultBack = false;\r\n      getOrderDetials(this.num).then((res) => {\r\n        console.log(res);\r\n        this.resultBack = true;\r\n        if (res.code == 200) {\r\n          this.details = res.data;\r\n          this.list[0] ={\r\n              picture: res.data.projectPicture,\r\n              name: res.data.projectName,\r\n              price: res.data.projectPrice,\r\n            };\r\n          \r\n        } else {\r\n          this.list = [];\r\n        }\r\n      });\r\n    },\r\n    //提交订单\r\n    pay() {\r\n      this.payShow=true\r\n      let obj={\r\n        orderNum:this.num,\r\n        payType:this.type\r\n      }\r\n      payOrder(obj).then(res=>{\r\n        if(res.code==101){\r\n        let routerData = this.$router.resolve({path:'/payHtml',query:{ htmlData: res.data}})\r\n     // 打开新页面\r\n      window.open(routerData.href, '_ blank')\r\n        }else if(res.code==102){\r\n          this.wxCode=res.data\r\n        }\r\n        console.log(res)\r\n      })\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.orderTop::before {\r\n  content: \"\";\r\n  display: block;\r\n}\r\n.orderTop {\r\n  height: 160px;\r\n  background-color: #e3e6e9;\r\n  background: url(\"../../assets/cart-header-bg.jpg\") repeat-x left bottom;\r\n  position: relative;\r\n  overflow: hidden;\r\n  .step {\r\n    width: 900px;\r\n    margin: 60px auto;\r\n    color: #fff;\r\n  }\r\n}\r\n.orderCon {\r\n  background: #f8fafc;\r\n  .con {\r\n    position: relative;\r\n    width: 1152px;\r\n    padding: 0 36px 32px;\r\n    background-color: #fff;\r\n    margin-top: -40px;\r\n    margin-left: auto;\r\n    margin-right: auto;\r\n    box-shadow: 0 8px 16px 0 rgba(7, 17, 27, 0.1);\r\n    border-radius: 8px;\r\n       margin-bottom: 30px;\r\n    .title {\r\n      padding-top: 36px;\r\n      padding-bottom: 24px;\r\n      .good-info {\r\n        margin-left: 12px;\r\n        color: #07111b;\r\n        font-size: 16px;\r\n        line-height: 16px;\r\n      }\r\n    }\r\n    .courseList {\r\n      width: 100%;\r\n      padding-bottom: 36px;\r\n      border-bottom: 1px solid #d9dde1;\r\n    }\r\n    .payWayTitle {\r\n      height: 46px;\r\n      line-height: 30px;\r\n      font-size: 16px;\r\n      color: #07111b;\r\n      margin-top: 30px;\r\n    }\r\n    .payWay {\r\n      width: 100%;\r\n      padding-bottom: 36px;\r\n      border-bottom: 1px solid #d9dde1;\r\n      display: flex;\r\n      justify-content: start;\r\n      align-items: center;\r\n      .item {\r\n        background-color: #f3f5f7;\r\n        margin-right: 18px;\r\n        position: relative;\r\n        border-radius: 6px;\r\n        overflow: hidden;\r\n        width: 192px;\r\n        height: 86px;\r\n        border: 2px solid #f3f5f7;\r\n        position: relative;\r\n        cursor: pointer;\r\n        .bottomRight {\r\n          display: none;\r\n          width: 0;\r\n          height: 0px;\r\n          position: absolute;\r\n          right: 0;\r\n          bottom: 0;\r\n          border-bottom: 20px solid red;\r\n          border-left: 20px solid transparent;\r\n          .right {\r\n            display: block;\r\n            position: absolute;\r\n            left: -14px;\r\n            top: 6px;\r\n            width: 16px;\r\n            height: 16px;\r\n            background: url(\"../../assets/right.png\");\r\n          }\r\n        }\r\n      }\r\n      .alipay {\r\n        background-image: url(\"../../assets/pay_s.png\");\r\n        background-position: 33px -304px;\r\n        background-repeat: no-repeat;\r\n      }\r\n      .weChat {\r\n        background-image: url(\"../../assets/pay_s.png\");\r\n        background-position: 30px -423px;\r\n        background-repeat: no-repeat;\r\n      }\r\n      .active {\r\n        border-color: #f01414;\r\n        .bottomRight {\r\n          display: block;\r\n        }\r\n      }\r\n    }\r\n    .orderSubmit {\r\n      margin-top: 36px;\r\n      display: flex;\r\n      justify-content: space-between;\r\n    }\r\n    .leftPayWay {\r\n      span {\r\n        display: inline-block;\r\n        padding: 0 12px;\r\n        height: 26px;\r\n        line-height: 26px;\r\n        border: 1px solid #f01414;\r\n        border-radius: 18px;\r\n        font-size: 12px;\r\n        color: #f01414;\r\n        margin-right: 15px;\r\n      }\r\n    }\r\n    .rightSub {\r\n      .row {\r\n        display: flex;\r\n        justify-content: space-between;\r\n        margin-bottom: 12px;\r\n        line-height: 26px;\r\n        width: 400px;\r\n        font-size: 14px;\r\n        color: #07111b;\r\n        .good-total,\r\n        .discount,\r\n        .final-total {\r\n          width: 260px;\r\n          text-align: right;\r\n        }\r\n        .good-total-price,\r\n        .discount-price,\r\n        .final-price {\r\n          width: 130px;\r\n          text-align: right;\r\n        }\r\n        .final-price {\r\n          font-weight: 700;\r\n          color: #f01414;\r\n          font-size: 24px;\r\n        }\r\n      }\r\n      .sub {\r\n        float: right;\r\n        button {\r\n          border-radius: 4px;\r\n          padding: 0;\r\n          width: 140px;\r\n          height: 40px;\r\n          margin-top: 12px;\r\n          text-align: center;\r\n          font-size: 14px;\r\n          line-height: 40px;\r\n          border-style: solid;\r\n          border-width: 1px;\r\n          cursor: pointer;\r\n          color: #fff;\r\n          background-color: #f20d0d;\r\n          border-color: #f20d0d;\r\n        }\r\n        button:hover {\r\n          color: #fff;\r\n          border-color: #c20a0a;\r\n          background: #c20a0a;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n.loading {\r\n  position: fixed;\r\n  background: rgba(0, 0, 0, 0.5);\r\n  top: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  z-index: 200;\r\n  .alipay {\r\n    background: #fff;\r\n    position: absolute;\r\n    box-shadow: 8px 0 16px 0 rgba(7, 17, 27, 0.2);\r\n    border-radius: 4px;\r\n    top: 50% !important;\r\n    left: 50% !important;\r\n    transform: translate(-50%, -50%);\r\n    width: 320px;\r\n    text-align: center;\r\n    padding: 36px 0 32px 0;\r\n    .wait-img {\r\n      width: 96px;\r\n      height: 96px;\r\n      background: #f3f5f6;\r\n      border-radius: 50%;\r\n      margin: 0 auto 12px;\r\n      img {\r\n        margin-top: 12px;\r\n      }\r\n    }\r\n    h3 {\r\n      font-size: 16px;\r\n      font-weight: 700;\r\n      color: #1c1f21;\r\n      line-height: 24px;\r\n    }\r\n    .tip {\r\n      margin: 4px auto 16px;\r\n      font-size: 12px;\r\n      color: #9199a1;\r\n      line-height: 18px;\r\n    }\r\n    .payBtn {\r\n      .success-btn {\r\n        border: none;\r\n        padding: 8px 52px;\r\n        cursor: pointer;\r\n        background: #383d42;\r\n        border-radius: 24px;\r\n        font-size: 14px;\r\n        color: #fff;\r\n        line-height: 20px;\r\n        outline: none;\r\n      }\r\n      .success-btn:hover {\r\n        background-color: #545c63;\r\n      }\r\n    }\r\n  }\r\n  .weChatPay {\r\n    background: #fff;\r\n    position: absolute;\r\n    box-shadow: 8px 0 16px 0 rgba(7, 17, 27, 0.2);\r\n    border-radius: 4px;\r\n    top: 50% !important;\r\n    left: 50% !important;\r\n    transform: translate(-50%, -50%);\r\n    width: 320px;\r\n    text-align: center;\r\n    padding: 36px 0 32px 0;\r\n    .price {\r\n      font-size: 16px;\r\n      color: #545c63;\r\n      line-height: 24px;\r\n      font-weight: 700;\r\n    }\r\n    .img-code {\r\n      width: 180px;\r\n      height: 180px;\r\n      margin: 12px auto;\r\n      img {\r\n        // border: 1px solid #aaa;\r\n        display: inline-block;\r\n        width: 180px;\r\n        height: 180px;\r\n      }\r\n    }\r\n    .p{\r\n      font-size: 12px;\r\n    color: #545c63;\r\n    line-height: 18px;\r\n    }\r\n     .payBtn {\r\n       margin-top: 10px;\r\n      .success-btn {\r\n        border: none;\r\n        padding: 8px 52px;\r\n        cursor: pointer;\r\n        background: #383d42;\r\n        border-radius: 24px;\r\n        font-size: 14px;\r\n        color: #fff;\r\n        line-height: 20px;\r\n        outline: none;\r\n      }\r\n      .success-btn:hover {\r\n        background-color: #545c63;\r\n      }\r\n    }\r\n  }\r\n}\r\n .payRechoose {\r\n      margin-top: 16px;\r\n      cursor: pointer;\r\n      font-size: 14px;\r\n      color: #9199a1;\r\n      line-height: 24px;\r\n    }\r\n</style>"]}]}