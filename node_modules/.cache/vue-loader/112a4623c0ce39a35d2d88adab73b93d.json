{"remainingRequest":"D:\\webStromAllSpace\\secondEdu\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\webStromAllSpace\\secondEdu\\src\\views\\course\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\webStromAllSpace\\secondEdu\\src\\views\\course\\index.vue","mtime":1610964953808},{"path":"D:\\webStromAllSpace\\secondEdu\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\webStromAllSpace\\secondEdu\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\webStromAllSpace\\secondEdu\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\webStromAllSpace\\secondEdu\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgZmx2anMgZnJvbSAiZmx2LmpzIjsNCmltcG9ydCB7DQogIGNvdXJzZURldGFpbCwNCiAgY291cnNlU3RhdHVzLA0KICBjb2xsZWN0aW9uQ291cnNlLA0KICBpc0NvbGxlY3Rpb25Db3Vyc2UsDQogIHN0dWR5U3RhdHVzLA0KfSBmcm9tICJAL2FwaS9jb3Vyc2UiOw0KaW1wb3J0IHsgb25saW5lUHJldmlldyB9IGZyb20gIi4uLy4uL2FwaS9hZG1pbiI7DQppbXBvcnQgeyB0b3RhbFRpbWUgfSBmcm9tICIuLi8uLi91dGlscy9pbmRleCI7DQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJDb3Vyc2VJbmRleCIsDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGJhY0Jhc2U6IHRoaXMuJHN0b3JlLmdldHRlcnMuYmFjQmFzZSwNCiAgICAgIGlkOiAiIiwNCiAgICAgIGNvdXJzZUlkOiAiIiwNCiAgICAgIHVzZXJJZDogIiIsDQogICAgICBjb3Vyc2U6IHt9LA0KICAgICAgY3VyVGltZTogIjAuMCIsDQogICAgICBNYXhUaW1lOiAiMC4wIiwNCiAgICAgIHRpbWVyOiBudWxsLA0KICAgICAgdmlkZW9Vcmw6ICIiLA0KICAgICAgaXNTdGFyOiBmYWxzZSwNCiAgICAgIGxvYWRpbmc6IGZhbHNlLA0KICAgICAgY291cnNlTG9hZGluZzogZmFsc2UsDQogICAgICBleGFtQm9vbDogMCwgLy/mmK/lkKblj6/ov5vlhaXogIPor5UNCiAgICB9Ow0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIC8vIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJiZWZvcmV1bmxvYWQiLCAoZSkgPT4gdGhpcy5jb250aW51ZShlKSk7DQogIH0sDQogIG1vdW50ZWQoKSB7DQogICAgLy8gd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoImJlZm9yZXVubG9hZCIsIChlKSA9PiB0aGlzLmNvbnRpbnVlKGUpKTsNCiAgICB0aGlzLmluaXQoKTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGdldFRvdGFsVGltZSh4KSB7DQogICAgICByZXR1cm4gdG90YWxUaW1lKHgpOw0KICAgIH0sDQogICAgLy/ov5vlhaXogIPor5UNCiAgICBnb0V4YW0oKSB7DQogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7DQogICAgICAgIHBhdGg6ICIvZXhhbSIsDQogICAgICAgIHF1ZXJ5OiB7DQogICAgICAgICAgdXNlcklkOiB0aGlzLmNvdXJzZS51c2VySWQsDQogICAgICAgICAgY291cnNlSWQ6IHRoaXMuY291cnNlLmlkLA0KICAgICAgICB9LA0KICAgICAgfSk7DQogICAgfSwNCiAgICAvL+ivvuS7tg0KICAgIGdldEZpbGUoeCkgew0KICAgICAgdGhpcy5jb3Vyc2VMb2FkaW5nID0gdHJ1ZTsNCiAgICAgIGxldCBvYmogPSB7DQogICAgICAgIHVybDogeCwNCiAgICAgICAgdHlwZTogImltYWdlIiwNCiAgICAgIH07DQogICAgICBvbmxpbmVQcmV2aWV3KG9iaikudGhlbigocmVzKSA9PiB7DQogICAgICAgIHRoaXMuY291cnNlTG9hZGluZyA9IGZhbHNlOw0KICAgICAgICBpZiAocmVzLmRhdGEubXNnICE9IG51bGwpIHsNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLor77ku7blh7rplJnvvIzml6Dms5Xorr/pl64iKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBsZXQgbmV3UGFnZSA9IHRoaXMuJHJvdXRlci5yZXNvbHZlKHsNCiAgICAgICAgICAgIHBhdGg6ICIvcHJldmlldyIsDQogICAgICAgICAgICBxdWVyeTogew0KICAgICAgICAgICAgICB1cmw6IHgsDQogICAgICAgICAgICAgIHR5cGU6ICJpbWFnZSIsDQogICAgICAgICAgICB9LA0KICAgICAgICAgIH0pOw0KICAgICAgICAgIHdpbmRvdy5vcGVuKG5ld1BhZ2UuaHJlZiwgIl9ibGFuayIpOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICAgIC8vIHdpbmRvdy5vcGVuKHRoaXMuYmFjQmFzZSArIHgsICJfYmxhbmsiKTsNCiAgICB9LA0KICAgIHRpbWVJbnRlcnZhbCgpIHsNCiAgICAgIHRoaXMudGltZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB7DQogICAgICAgIGNvdXJzZVN0YXR1cyh0aGlzLmlkLCAwLCB0aGlzLmN1clRpbWUpLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcyk7DQogICAgICAgIH0pOw0KICAgICAgfSwgNTAwMCk7DQogICAgfSwNCiAgICAvLyAvL+aWreeCuee7reaSre+8jOWIt+aWsOaIluWFs+mXrQ0KICAgIC8vIGNvbnRpbnVlKGUpIHsNCiAgICAvLyAgIGNvbnNvbGUubG9nKGUpDQogICAgLy8gICBlID0gZSB8fCB3aW5kb3cuZXZlbnQ7DQogICAgLy8gICBpZiAoZSkgew0KICAgIC8vICAgICBlLnJldHVyblZhbHVlID0gIuaCqOaYr+WQpuehruiupOemu+W8gOatpOmhtemdoi3mgqjovpPlhaXnmoTmlbDmja7lj6/og73kuI3kvJrooqvkv53lrZgiOw0KICAgIC8vICAgfQ0KICAgIC8vICAgcmV0dXJuICLmgqjmmK/lkKbnoa7orqTnprvlvIDmraTpobXpnaIt5oKo6L6T5YWl55qE5pWw5o2u5Y+v6IO95LiN5Lya6KKr5L+d5a2YIjsNCiAgICAvLyAgIC8vIC4uLg0KICAgIC8vIH0sDQogICAgdmlkZXJSZW5kZXIoKSB7DQogICAgICB2YXIgdGhhdCA9IHRoaXM7DQogICAgICBsZXQgZHVyYSA9IDA7DQogICAgICBsZXQgbGFzdCA9IE51bWJlcih0aGlzLmN1clRpbWUpOw0KICAgICAgdmFyIHZpZGVvRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ2aWRlb0VsZW1lbnQiKTsNCiAgICAgIHZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCJwbGF5IiwgKCkgPT4gew0KICAgICAgICAvL+aSreaUvuW8gOWni+aJp+ihjOeahOWHveaVsA0KICAgICAgICBjb25zb2xlLmxvZygi5byA5aeL5pKt5pS+Iik7DQogICAgICAgIHZpZGVvRWxlbWVudC5jdXJyZW50VGltZSA9IHRoaXMuY3VyVGltZTsNCiAgICAgICAgY29uc29sZS5sb2codmlkZW9FbGVtZW50LmN1cnJlbnRUaW1lKTsNCiAgICAgICAgbGV0IGN1ciA9IHZpZGVvRWxlbWVudC5jdXJyZW50VGltZS50b0ZpeGVkKDEpOw0KICAgICAgICB0aGlzLnRpbWVJbnRlcnZhbCgpOw0KICAgICAgICBpZiAoY3VyID09ICIwLjAiKSB7DQogICAgICAgICAgY29uc29sZS5sb2coIjEyMyIpOw0KICAgICAgICAgIGxldCBpZCA9IHRoaXMuaWQ7DQogICAgICAgICAgY291cnNlU3RhdHVzKGlkLCAwLCBjdXIpLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKTsNCiAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgICB2aWRlb0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigibG9hZGVkbWV0YWRhdGEiLCAoKSA9PiB7DQogICAgICAgIHZpZGVvRWxlbWVudC5jdXJyZW50VGltZSA9IHRoYXQuY3VyVGltZTsNCiAgICAgICAgZHVyYSA9IHZpZGVvRWxlbWVudC5kdXJhdGlvbjsNCiAgICAgICAgdmlkZW9FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoInRpbWV1cGRhdGUiLCBoYW5kbGUpOw0KICAgICAgfSk7DQogICAgICBmdW5jdGlvbiBoYW5kbGUoKSB7DQogICAgICAgIGxldCBjdXIgPSB2aWRlb0VsZW1lbnQuY3VycmVudFRpbWUudG9GaXhlZCgxKTsNCiAgICAgICAgdGhhdC5jdXJUaW1lID0gdmlkZW9FbGVtZW50LmN1cnJlbnRUaW1lLnRvRml4ZWQoMSk7DQogICAgICAgIHRoYXQuTWF4VGltZSA9IGN1ciA+PSB0aGF0Lk1heFRpbWUgPyBjdXIgOiB0aGF0Lk1heFRpbWU7DQogICAgICAgIC8vIGNvbnNvbGUubG9nKHRoYXQuTWF4VGltZSk7DQogICAgICAgIC8vIGNvbnNvbGUubG9nKGxhc3QpOw0KICAgICAgICAvLyDnpoHmraLliY3ov5vlkI7pgIANCiAgICAgICAgaWYgKGN1ciAtIGxhc3QgPiAyIHx8IGN1ciAtIGxhc3QgPCAwKSB7DQogICAgICAgICAgdmlkZW9FbGVtZW50LmN1cnJlbnRUaW1lID0gbGFzdDsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBsYXN0ID0gY3VyOw0KICAgICAgICB9DQogICAgICAgIGlmIChkdXJhIC0gY3VyIDw9IDApIHsNCiAgICAgICAgICBsZXQgaWQgPSB0aGF0LmlkOw0KICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhhdC50aW1lcik7DQogICAgICAgICAgY291cnNlU3RhdHVzKGlkLCAxLCB0aGF0LmN1clRpbWUpLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgICAgdGhpcy5leGFtQm9vbCA9IDE7DQogICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7DQogICAgICAgICAgfSk7DQoNCiAgICAgICAgICB2aWRlb0VsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigidGltZXVwZGF0ZSIsIGhhbmRsZSk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LA0KICAgIGluaXQoKSB7DQogICAgICB0aGlzLmlkID0gdGhpcy4kcm91dGUucXVlcnkuaWQ7DQogICAgICBjb3Vyc2VEZXRhaWwodGhpcy5pZCkudGhlbigocmVzKSA9PiB7DQogICAgICAgIGNvbnNvbGUubG9nKHJlcyk7DQogICAgICAgIGlmIChyZXMuY29kZSA9PSA1NjcpIHsNCiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7DQogICAgICAgICAgICBwYXRoOiAiL2NvdXJzZUxpc3QiLA0KICAgICAgICAgICAgcXVlcnk6IHsgaWQ6IHRoaXMuJHJvdXRlLnF1ZXJ5LmNvdXJzZUlkIH0sDQogICAgICAgICAgfSk7DQogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi6K+35YWI6LSt5Lmw6K+l6K++56iLIik7DQogICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9IGVsc2UgaWYgKHJlcy5jb2RlID09IDIwMCkgew0KICAgICAgICAgIHRoaXMuY291cnNlID0gcmVzLmRhdGE7DQogICAgICAgICAgbGV0IHZpZGVvVXJsID0gcmVzLmRhdGEudmlkZW9Vcmw7DQogICAgICAgICAgY29uc29sZS5sb2codmlkZW9VcmwpOw0KICAgICAgICAgIGlmICh2aWRlb1VybC5pbmRleE9mKCJodHRwIikgPT0gLTEpIHsNCiAgICAgICAgICAgIHZpZGVvVXJsID0gdGhpcy5iYWNCYXNlICsgdmlkZW9Vcmw7DQogICAgICAgICAgICAvLyB2aWRlb1VybD0nZnRwOi8vMTkyLjE2OC4xLjgyL1I0NDMtMDAwOC1SLm1wNCcNCiAgICAgICAgICAgIGxldCB0eXBlID0gdGhpcy5jb3Vyc2UudmlkZW9Vcmwuc3BsaXQoIi4iKVsxXTsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKHR5cGUsIHZpZGVvVXJsKTsNCiAgICAgICAgICAgIC8vICAgaWYgKGZsdmpzLmlzU3VwcG9ydGVkKCkpIHsNCiAgICAgICAgICAgIC8vICAgICB2YXIgdmlkZW9FbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInZpZGVvRWxlbWVudCIpOw0KICAgICAgICAgICAgLy8gICAgIHZhciBmbHZQbGF5ZXIgPSBmbHZqcy5jcmVhdGVQbGF5ZXIoew0KICAgICAgICAgICAgLy8gICAgICAgdHlwZTogdHlwZSwNCiAgICAgICAgICAgIC8vICAgICAgIHVybDogdmlkZW9VcmwsDQogICAgICAgICAgICAvLyAgICAgfSk7DQogICAgICAgICAgICAvLyAgICAgZmx2UGxheWVyLmF0dGFjaE1lZGlhRWxlbWVudCh2aWRlb0VsZW1lbnQpOw0KICAgICAgICAgICAgLy8gICAgIGZsdlBsYXllci5sb2FkKCk7DQogICAgICAgICAgICAvLyAgIH0NCg0KICAgICAgICAgICAgLy8g5by65Yi25pKt5pS+DQogICAgICAgICAgICB2YXIgdmlkZW9FbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInZpZGVvRWxlbWVudCIpOw0KICAgICAgICAgICAgdmFyIGZsdlBsYXllciA9IGZsdmpzLmNyZWF0ZVBsYXllcih7DQogICAgICAgICAgICAgIHR5cGU6IHR5cGUsDQogICAgICAgICAgICAgIHVybDogdmlkZW9VcmwsDQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIGZsdlBsYXllci5hdHRhY2hNZWRpYUVsZW1lbnQodmlkZW9FbGVtZW50KTsNCiAgICAgICAgICAgIGZsdlBsYXllci5sb2FkKCk7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHRoaXMudmlkZW9VcmwgPSB2aWRlb1VybDsNCiAgICAgICAgICB9DQogICAgICAgIH1lbHNlew0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzLm1zZykNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgICB0aGlzLmdldFN0dWR5U3RhdHVzKCk7DQogICAgICBpc0NvbGxlY3Rpb25Db3Vyc2UodGhpcy5pZCkudGhlbigocmVzKSA9PiB7DQogICAgICAgIHRoaXMuaXNTdGFyID0gcmVzLmRhdGE7DQogICAgICB9KTsNCiAgICB9LA0KICAgIC8v5a2m5Lmg6L+b5bqm5Zue5pi+DQogICAgZ2V0U3R1ZHlTdGF0dXMoKSB7DQogICAgICBzdHVkeVN0YXR1cyh7IGNvdXJzZUlkOiB0aGlzLmlkIH0pLnRoZW4oKHJlcykgPT4gew0KICAgICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YSk7DQogICAgICAgIHRoaXMuZXhhbUJvb2wgPSByZXMuZGF0YVswXSA/IHJlcy5kYXRhWzBdLnN0YXR1cyA6IDA7DQogICAgICAgIHRoaXMuY3VyVGltZSA9IHJlcy5kYXRhWzBdDQogICAgICAgICAgPyByZXMuZGF0YVswXS5sZWFybmluZ1RpbWUgPT0gInVuZGVmaW5lZCINCiAgICAgICAgICAgID8gIjAuMCINCiAgICAgICAgICAgIDogcmVzLmRhdGFbMF0ubGVhcm5pbmdUaW1lDQogICAgICAgICAgOiAiMC4wIjsNCiAgICAgICAgdGhpcy5NYXhUaW1lID0gdGhpcy5jdXJUaW1lOw0KICAgICAgICBpZiAodGhpcy5leGFtQm9vbCA9PSAwKSB7DQogICAgICAgICAgdGhpcy52aWRlclJlbmRlcigpOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9LA0KICAgIHN0YXIoKSB7DQogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOw0KICAgICAgY29sbGVjdGlvbkNvdXJzZSh0aGlzLmlkKQ0KICAgICAgICAudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7DQogICAgICAgICAgdGhpcy5pc1N0YXIgPSByZXMuZGF0YTsNCiAgICAgICAgfSkNCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gew0KICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOw0KICAgICAgICB9KTsNCiAgICB9LA0KICB9LA0KICBiZWZvcmVSb3V0ZUxlYXZlOiAodG8sIGZyb20sIG5leHQpID0+IHsNCiAgICAvL+aWreeCuee7reaSrei3s+i9rA0KICAgIGlmIChmcm9tLnRpbWVyKSB7DQogICAgICBjbGVhckludGVydmFsKGZyb20udGltZXIpOw0KICAgIH0NCiAgICBuZXh0KCk7DQogIH0sDQogIGRlc3Ryb3llZCgpIHsNCiAgICAvLyB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigiYmVmb3JldW5sb2FkIiwgKGUpID0+IHRoaXMudGVzdChlKSk7DQogICAgaWYgKHRoaXMudGltZXIpIHsNCiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy50aW1lcik7DQogICAgfQ0KICB9LA0KfTsNCg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/course","sourcesContent":["<template>\r\n  <div class=\"main\">\r\n    <div class=\"container\">\r\n      <div class=\"video-box\">\r\n        <video\r\n          :class=\"examBool==0?'video':'beenWatched'\"\r\n          id=\"videoElement\"\r\n          controls\r\n          :src=\"videoUrl\"\r\n          height=\"300px\"\r\n        ></video>\r\n      </div>\r\n      <div class=\"content\">\r\n        <div class=\"title\">{{course.name}}</div>\r\n        <div class=\"minor\">\r\n          <div class=\"row\" style=\"display: block;\">\r\n            作者：\r\n            <span class=\"data\">{{course.realname}}</span>\r\n            <span class=\"word\">({{course.unitName}})</span>\r\n          </div>\r\n          <!-- <div class=\"row\">视频来源：</div> -->\r\n        </div>\r\n        <div class=\"minor fs_small\">\r\n          <div class=\"row\">\r\n            <div class=\"row_item\">发布时间：{{course.createTime}}</div>\r\n          </div>\r\n          <div class=\"row\">\r\n            <div class=\"row_item\">时长：{{getTotalTime(course.time)}}</div>\r\n          </div>\r\n          <div class=\"row\">\r\n            <div class=\"row_item\">分类： {{course.courseTypes}}</div>\r\n          </div>\r\n          <div class=\"row\">\r\n            <div class=\"row_item\">关键词：{{course.keywords}}</div>\r\n          </div>\r\n          <div class=\"row\" style=\"margin-top:30px\">\r\n            <div class=\"row_item\">\r\n              <el-button\r\n                type=\"success\"\r\n                @click=\"getFile(course.fileUrl)\"\r\n                size=\"mini\"\r\n                icon=\"el-icon-notebook-1\"\r\n                :loading=\"courseLoading\"\r\n                :disabled=\"course.fileUrl==''\"\r\n              >课件</el-button>\r\n              <el-button\r\n                type=\"warning\"\r\n                icon=\"el-icon-star-off\"\r\n                size=\"mini\"\r\n                @click=\"star\"\r\n                :loading=\"loading\"\r\n              >\r\n                <span v-show=\"!isStar\">收藏</span>\r\n                <span v-show=\"isStar\">取消收藏</span>\r\n              </el-button>\r\n              <!-- <el-button\r\n                :disabled=\"examBool==0\"\r\n                type=\"primary\"\r\n                icon=\"el-icon-document\"\r\n                size=\"mini\"\r\n                @click=\"goExam\"\r\n              >进入考试</el-button> -->\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<style lang=\"scss\" scoped>\r\n.main {\r\n  background: #f5f5f5;\r\n}\r\n.container {\r\n  width: 1080px;\r\n  margin: 0 auto;\r\n  padding: 30px 0;\r\n  overflow: hidden;\r\n}\r\n.video-box {\r\n  width: 600px;\r\n  float: left;\r\n  padding: 30px;\r\n  background: #fff;\r\n  .video {\r\n    width: 100%;\r\n    margin: 0 auto;\r\n    &::-webkit-media-controls-timeline {\r\n      display: none;\r\n    }\r\n  }\r\n  .beenWatched {\r\n    width: 100%;\r\n    margin: 0 auto;\r\n  }\r\n}\r\n.content {\r\n  width: 300px;\r\n  height: 300px;\r\n  margin-left: 30px;\r\n  padding: 30px;\r\n  background: #fff;\r\n  font-size: 14px;\r\n  color: #555;\r\n  float: left;\r\n  .title {\r\n    font-size: 18px;\r\n    margin-bottom: 20px;\r\n  }\r\n}\r\n.minor {\r\n  margin-bottom: 20px;\r\n  .data {\r\n    color: #165694;\r\n  }\r\n  .word {\r\n    margin-left: 5px;\r\n    color: gray;\r\n  }\r\n  .row {\r\n    height: 24px;\r\n    line-height: 24px;\r\n    display: flex;\r\n    justify-content: space-between;\r\n  }\r\n  .row_item {\r\n    flex: 1;\r\n  }\r\n}\r\n.fs_small {\r\n  font-size: 12px;\r\n}\r\n</style>\r\n<script>\r\nimport flvjs from \"flv.js\";\r\nimport {\r\n  courseDetail,\r\n  courseStatus,\r\n  collectionCourse,\r\n  isCollectionCourse,\r\n  studyStatus,\r\n} from \"@/api/course\";\r\nimport { onlinePreview } from \"../../api/admin\";\r\nimport { totalTime } from \"../../utils/index\";\r\nexport default {\r\n  name: \"CourseIndex\",\r\n  data() {\r\n    return {\r\n      bacBase: this.$store.getters.bacBase,\r\n      id: \"\",\r\n      courseId: \"\",\r\n      userId: \"\",\r\n      course: {},\r\n      curTime: \"0.0\",\r\n      MaxTime: \"0.0\",\r\n      timer: null,\r\n      videoUrl: \"\",\r\n      isStar: false,\r\n      loading: false,\r\n      courseLoading: false,\r\n      examBool: 0, //是否可进入考试\r\n    };\r\n  },\r\n  created() {\r\n    // window.addEventListener(\"beforeunload\", (e) => this.continue(e));\r\n  },\r\n  mounted() {\r\n    // window.addEventListener(\"beforeunload\", (e) => this.continue(e));\r\n    this.init();\r\n  },\r\n  methods: {\r\n    getTotalTime(x) {\r\n      return totalTime(x);\r\n    },\r\n    //进入考试\r\n    goExam() {\r\n      this.$router.push({\r\n        path: \"/exam\",\r\n        query: {\r\n          userId: this.course.userId,\r\n          courseId: this.course.id,\r\n        },\r\n      });\r\n    },\r\n    //课件\r\n    getFile(x) {\r\n      this.courseLoading = true;\r\n      let obj = {\r\n        url: x,\r\n        type: \"image\",\r\n      };\r\n      onlinePreview(obj).then((res) => {\r\n        this.courseLoading = false;\r\n        if (res.data.msg != null) {\r\n          this.$message.error(\"课件出错，无法访问\");\r\n        } else {\r\n          let newPage = this.$router.resolve({\r\n            path: \"/preview\",\r\n            query: {\r\n              url: x,\r\n              type: \"image\",\r\n            },\r\n          });\r\n          window.open(newPage.href, \"_blank\");\r\n        }\r\n      });\r\n      // window.open(this.bacBase + x, \"_blank\");\r\n    },\r\n    timeInterval() {\r\n      this.timer = setInterval(() => {\r\n        courseStatus(this.id, 0, this.curTime).then((res) => {\r\n          // console.log(res);\r\n        });\r\n      }, 5000);\r\n    },\r\n    // //断点续播，刷新或关闭\r\n    // continue(e) {\r\n    //   console.log(e)\r\n    //   e = e || window.event;\r\n    //   if (e) {\r\n    //     e.returnValue = \"您是否确认离开此页面-您输入的数据可能不会被保存\";\r\n    //   }\r\n    //   return \"您是否确认离开此页面-您输入的数据可能不会被保存\";\r\n    //   // ...\r\n    // },\r\n    viderRender() {\r\n      var that = this;\r\n      let dura = 0;\r\n      let last = Number(this.curTime);\r\n      var videoElement = document.getElementById(\"videoElement\");\r\n      videoElement.addEventListener(\"play\", () => {\r\n        //播放开始执行的函数\r\n        console.log(\"开始播放\");\r\n        videoElement.currentTime = this.curTime;\r\n        console.log(videoElement.currentTime);\r\n        let cur = videoElement.currentTime.toFixed(1);\r\n        this.timeInterval();\r\n        if (cur == \"0.0\") {\r\n          console.log(\"123\");\r\n          let id = this.id;\r\n          courseStatus(id, 0, cur).then((res) => {\r\n            console.log(res);\r\n          });\r\n        }\r\n      });\r\n      videoElement.addEventListener(\"loadedmetadata\", () => {\r\n        videoElement.currentTime = that.curTime;\r\n        dura = videoElement.duration;\r\n        videoElement.addEventListener(\"timeupdate\", handle);\r\n      });\r\n      function handle() {\r\n        let cur = videoElement.currentTime.toFixed(1);\r\n        that.curTime = videoElement.currentTime.toFixed(1);\r\n        that.MaxTime = cur >= that.MaxTime ? cur : that.MaxTime;\r\n        // console.log(that.MaxTime);\r\n        // console.log(last);\r\n        // 禁止前进后退\r\n        if (cur - last > 2 || cur - last < 0) {\r\n          videoElement.currentTime = last;\r\n        } else {\r\n          last = cur;\r\n        }\r\n        if (dura - cur <= 0) {\r\n          let id = that.id;\r\n          clearInterval(that.timer);\r\n          courseStatus(id, 1, that.curTime).then((res) => {\r\n            this.examBool = 1;\r\n            location.reload();\r\n            console.log(res);\r\n          });\r\n\r\n          videoElement.removeEventListener(\"timeupdate\", handle);\r\n        }\r\n      }\r\n    },\r\n    init() {\r\n      this.id = this.$route.query.id;\r\n      courseDetail(this.id).then((res) => {\r\n        console.log(res);\r\n        if (res.code == 567) {\r\n          this.$router.push({\r\n            path: \"/courseList\",\r\n            query: { id: this.$route.query.courseId },\r\n          });\r\n          this.$message.error(\"请先购买该课程\");\r\n          return;\r\n        } else if (res.code == 200) {\r\n          this.course = res.data;\r\n          let videoUrl = res.data.videoUrl;\r\n          console.log(videoUrl);\r\n          if (videoUrl.indexOf(\"http\") == -1) {\r\n            videoUrl = this.bacBase + videoUrl;\r\n            // videoUrl='ftp://192.168.1.82/R443-0008-R.mp4'\r\n            let type = this.course.videoUrl.split(\".\")[1];\r\n            console.log(type, videoUrl);\r\n            //   if (flvjs.isSupported()) {\r\n            //     var videoElement = document.getElementById(\"videoElement\");\r\n            //     var flvPlayer = flvjs.createPlayer({\r\n            //       type: type,\r\n            //       url: videoUrl,\r\n            //     });\r\n            //     flvPlayer.attachMediaElement(videoElement);\r\n            //     flvPlayer.load();\r\n            //   }\r\n\r\n            // 强制播放\r\n            var videoElement = document.getElementById(\"videoElement\");\r\n            var flvPlayer = flvjs.createPlayer({\r\n              type: type,\r\n              url: videoUrl,\r\n            });\r\n            flvPlayer.attachMediaElement(videoElement);\r\n            flvPlayer.load();\r\n          } else {\r\n            this.videoUrl = videoUrl;\r\n          }\r\n        }else{\r\n          this.$message.error(res.msg)\r\n        }\r\n      });\r\n      this.getStudyStatus();\r\n      isCollectionCourse(this.id).then((res) => {\r\n        this.isStar = res.data;\r\n      });\r\n    },\r\n    //学习进度回显\r\n    getStudyStatus() {\r\n      studyStatus({ courseId: this.id }).then((res) => {\r\n        console.log(res.data);\r\n        this.examBool = res.data[0] ? res.data[0].status : 0;\r\n        this.curTime = res.data[0]\r\n          ? res.data[0].learningTime == \"undefined\"\r\n            ? \"0.0\"\r\n            : res.data[0].learningTime\r\n          : \"0.0\";\r\n        this.MaxTime = this.curTime;\r\n        if (this.examBool == 0) {\r\n          this.viderRender();\r\n        }\r\n      });\r\n    },\r\n    star() {\r\n      this.loading = true;\r\n      collectionCourse(this.id)\r\n        .then((res) => {\r\n          this.loading = false;\r\n          this.isStar = res.data;\r\n        })\r\n        .catch((error) => {\r\n          this.loading = false;\r\n        });\r\n    },\r\n  },\r\n  beforeRouteLeave: (to, from, next) => {\r\n    //断点续播跳转\r\n    if (from.timer) {\r\n      clearInterval(from.timer);\r\n    }\r\n    next();\r\n  },\r\n  destroyed() {\r\n    // window.removeEventListener(\"beforeunload\", (e) => this.test(e));\r\n    if (this.timer) {\r\n      clearInterval(this.timer);\r\n    }\r\n  },\r\n};\r\n</script>"]}]}