{"remainingRequest":"D:\\webStromAllSpace\\secondEdu\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\webStromAllSpace\\secondEdu\\src\\views\\index\\sign.vue?vue&type=style&index=0&id=2ba22174&lang=scss&scoped=true&","dependencies":[{"path":"D:\\webStromAllSpace\\secondEdu\\src\\views\\index\\sign.vue","mtime":1611540327769},{"path":"D:\\webStromAllSpace\\secondEdu\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\webStromAllSpace\\secondEdu\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\webStromAllSpace\\secondEdu\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\webStromAllSpace\\secondEdu\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\webStromAllSpace\\secondEdu\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\webStromAllSpace\\secondEdu\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KJGlubmVyV2lkdGg6IDEyMDBweDsNCi5jb250YWluZXIgew0KICBiYWNrZ3JvdW5kOiAjZThmMGY0Ow0KICBvdmVyZmxvdzogaGlkZGVuOw0KICAuY29uIHsNCiAgICA6OnYtZGVlcCAuc2UgLmVsLWlucHV0IHsNCiAgICAgIHdpZHRoOiAxMzBweDsNCiAgICB9DQogICAgd2lkdGg6ICRpbm5lcldpZHRoOw0KICAgIGJhY2tncm91bmQ6ICNmZmY7DQogICAgYm9yZGVyOiAxcHggc29saWQgI2RkZDsNCiAgICBtYXJnaW46IDEwcHggYXV0bzsNCiAgICAuYnJlYWQgew0KICAgICAgcGFkZGluZzogMTBweCAwIDIwcHggMTBweDsNCiAgICB9DQogICAgLnRpdGxlIHsNCiAgICAgIGZvbnQtc2l6ZTogMjRweDsNCiAgICAgIGNvbG9yOiAjNDY1NjQ2Ow0KICAgICAgcGFkZGluZzogNDBweCAwOw0KICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgIH0NCiAgICAudGlwIHsNCiAgICAgIGZvbnQtc2l6ZTogMTJweDsNCiAgICAgIGNvbG9yOiAjMTI0YWEyOw0KICAgICAgZmxvYXQ6IGxlZnQ7DQogICAgICBtYXJnaW4tbGVmdDogMTBweDsNCiAgICB9DQogICAgLnNpZ25MaXN0cyB7DQogICAgICB3aWR0aDogODAwcHg7DQogICAgICBtYXJnaW46IDAgYXV0bzsNCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["sign.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"sign.vue","sourceRoot":"src/views/index","sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <div class=\"con\">\r\n      <div class=\"bread\">\r\n        <el-breadcrumb separator=\"/\">\r\n          <el-breadcrumb-item :to=\"{ path: '/' }\">首页</el-breadcrumb-item>\r\n          <el-breadcrumb-item>注册</el-breadcrumb-item>\r\n        </el-breadcrumb>\r\n      </div>\r\n      <div class=\"title\">欢迎注册学霸Pu继教</div>\r\n      <div class=\"tip\">\r\n        填写注册信息（\r\n        <span style=\"color:red\">*</span>为必填）\r\n      </div>\r\n      <el-divider></el-divider>\r\n      <div class=\"signLists\">\r\n        <el-form\r\n          :rules=\"rules\"\r\n          :label-position=\"labelPosition\"\r\n          label-width=\"100px\"\r\n          :model=\"formLabelAlign\"\r\n        >\r\n          <el-form-item label=\"用户名\" prop=\"username\">\r\n            <el-input v-model=\"formLabelAlign.username\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"密码\" prop=\"password\">\r\n            <el-input v-model=\"formLabelAlign.password\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"姓名\" prop=\"realname\">\r\n            <el-input v-model=\"formLabelAlign.realname\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"性别\">\r\n            <el-radio v-model=\"formLabelAlign.gender\" label=\"1\">男</el-radio>\r\n            <el-radio v-model=\"formLabelAlign.gender\" label=\"2\">女</el-radio>\r\n          </el-form-item>\r\n          <el-form-item label=\"证件相关\" class=\"card\" prop=\"cardNo\">\r\n            <el-input\r\n              placeholder=\"请输入证件号\"\r\n              v-model=\"formLabelAlign.cardNo\"\r\n              class=\"input-with-select\"\r\n            >\r\n              <el-select\r\n                class=\"se\"\r\n                v-model=\"formLabelAlign.cardType\"\r\n                slot=\"prepend\"\r\n                placeholder=\"请选择证件类型\"\r\n              >\r\n                <el-option label=\"身份证\" value=\"1\"></el-option>\r\n                <el-option label=\"军官证\" value=\"2\"></el-option>\r\n                <el-option label=\"港澳台身份证\" value=\"3\"></el-option>\r\n              </el-select>\r\n            </el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"手机号\" prop=\"mobile\">\r\n            <el-input v-model=\"formLabelAlign.mobile\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"邮箱\" prop=\"email\">\r\n            <el-input v-model=\"formLabelAlign.email\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item v-if=\"formLabelAlign.type!=1\" label=\"单位\" prop=\"unitId\">\r\n            <el-select @change=\"getProvince($event)\" v-model=\"provinceValue\" placeholder=\"请选择省\">\r\n              <el-option\r\n                v-for=\"item in province\"\r\n                :key=\"item.id\"\r\n                :label=\"item.name\"\r\n                :value=\"item.id\"\r\n              ></el-option>\r\n            </el-select>\r\n            <el-select @change=\"getCity($event)\" v-model=\"cityValue\" placeholder=\"请选择市\">\r\n              <el-option v-for=\"item in city\" :key=\"item.id\" :label=\"item.name\" :value=\"item.id\"></el-option>\r\n            </el-select>\r\n            <el-select @change=\"getDistrict($event)\" v-model=\"districtValue\" placeholder=\"请选择地区\">\r\n              <el-option\r\n                v-for=\"item in district\"\r\n                :key=\"item.id\"\r\n                :label=\"item.name\"\r\n                :value=\"item.id\"\r\n              ></el-option>\r\n            </el-select>\r\n            <!-- 单位 -->\r\n            <el-select\r\n              allow-create\r\n              style=\"width:60%;marginTop:20px\"\r\n              v-model=\"formLabelAlign.unitId\"\r\n              filterable\r\n              remote\r\n              reserve-keyword\r\n              placeholder=\"请输入单位名称\"\r\n              :remote-method=\"remoteMethod\"\r\n              @change=\"getoffice\"\r\n              :loading=\"loading\"\r\n            >\r\n              <el-option\r\n                v-for=\"item in unitLists\"\r\n                :key=\"item.value\"\r\n                :label=\"item.label\"\r\n                :value=\"item.value\"\r\n              ></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n          <!-- <el-form-item label=\"单位\" prop=\"unitId\">\r\n            <el-select\r\n              allow-create\r\n              style=\"width:100%\"\r\n              v-model=\"formLabelAlign.unitId\"\r\n              filterable\r\n              remote\r\n              reserve-keyword\r\n              placeholder=\"请输入关键词\"\r\n              :remote-method=\"remoteMethod\"\r\n              @change=\"getoffice\"\r\n              :loading=\"loading\"\r\n            >\r\n              <el-option\r\n                v-for=\"item in unitLists\"\r\n                :key=\"item.value\"\r\n                :label=\"item.label\"\r\n                :value=\"item.value\"\r\n              ></el-option>\r\n            </el-select>\r\n          </el-form-item>-->\r\n          <el-form-item label=\"科室\" prop=\"departId\">\r\n            <el-select\r\n              allow-create\r\n\r\n              style=\"width:100%\"\r\n              v-model=\"formLabelAlign.departId\"\r\n              filterable\r\n              remote\r\n              reserve-keyword\r\n              placeholder=\"请输入关键词\"\r\n              :remote-method=\"getoffice\"\r\n              :loading=\"loading\"\r\n            >\r\n              <el-option\r\n                v-for=\"item in office\"\r\n                :key=\"item.value\"\r\n                :label=\"item.label\"\r\n                :value=\"item.value\"\r\n              ></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item label=\"单位地址\">\r\n            <el-input v-model=\"formLabelAlign.unitAddress\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"学历\">\r\n            <el-select v-model=\"formLabelAlign.education\" placeholder=\"请选择学历\">\r\n              <el-option v-for=\"(item,i) of educationList\" :key=\"i\" :label=\"item\" :value=\"item\"></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item label=\"头像\" prop=\"header\">\r\n            <img v-show=\"imgList1.length>0\" style=\"maxWidth:200px\" :src=\"base+imgList1[0]\" />\r\n            <el-upload\r\n              class=\"upload-demo\"\r\n              :action=\"picUrl\"\r\n              :on-preview=\"handlePreview\"\r\n              :on-remove=\"handleRemove\"\r\n              :before-remove=\"beforeRemove\"\r\n              :limit=\"1\"\r\n              accept=\".jpg, .png\"\r\n              :on-exceed=\"handleExceed\"\r\n              :on-success=\"imgUpload1\"\r\n            >\r\n              <el-button size=\"small\" type=\"primary\">点击上传</el-button>\r\n              <div slot=\"tip\" class=\"el-upload__tip\">只能上传jpg/png文件</div>\r\n            </el-upload>\r\n          </el-form-item>\r\n          <el-form-item label=\"头衔\">\r\n            <el-input v-model=\"formLabelAlign.title\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"简介\">\r\n            <el-input type=\"textarea\" :rows=\"4\" placeholder=\"请输入内容\" v-model=\"formLabelAlign.desc\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item>\r\n            <el-button type=\"primary\" @click=\"onSubmit\">注 册</el-button>\r\n          </el-form-item>\r\n        </el-form>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { area, unitList, sign } from \"@/api/admin\";\r\nexport default {\r\n  name: \"add\",\r\n  created() {\r\n    this.picUrl = this.$store.getters.bacBase + \"/common/upload\";\r\n    this.getarea();\r\n  },\r\n  data() {\r\n    return {\r\n      base: this.$store.getters.bacBase,\r\n      picUrl: \"\",\r\n      labelPosition: \"right\",\r\n      rules: {\r\n        cardNo: [{ required: true, message: \"请输入证件\", trigger: \"blur\" }],\r\n        unitId: [{ required: true, message: \"请输入机构\", trigger: \"blur\" }],\r\n        departId: [{ required: true, message: \"请输入科室\", trigger: \"blur\" }],\r\n        realname: [{ required: true, message: \"请输入姓名\", trigger: \"blur\" }],\r\n        header: [{ required: true, message: \"请上传头像\", trigger: \"blur\" }],\r\n        email: [{ required: true, message: \"请输入邮箱\", trigger: \"blur\" }],\r\n        username: [\r\n          { required: true, message: \"请输入用户名\", trigger: \"blur\" },\r\n        ],\r\n        password: [{ required: true, message: \"请输入密码\", trigger: \"blur\" }],\r\n        mobile: [{ required: true, message: \"请输入手机号\", trigger: \"blur\" }],\r\n      },\r\n      formLabelAlign: {\r\n        cardNo: \"\", //证件号1\r\n        cardType: \"\", //证件类型 1身份证 2军官证 3港澳台身份证2\r\n        unitId: \"\", //机构id16\r\n        unitName: \"\", //机构名称\r\n        realname: \"\", //真实名称14\r\n        city: \"\", //城市3\r\n        province: \"\", //省13\r\n        district: \"\", //地区6\r\n        departId: \"\", //科室id4\r\n        departName: \"\", //科室名称\r\n        desc: \"\", //简介介绍5\r\n        gender: \"1\", //性别9\r\n        mobile: \"\", //手机号码11\r\n        education: \"\", //学历7\r\n        email: \"\", //8\r\n        username: \"\", //用户名17\r\n        password: \"\", //密码12\r\n        title: \"\", //头衔15\r\n        header: \"\", //头像10\r\n        unitAddress: \"\", //单位地址\r\n      },\r\n      typeList: [\"机构\", \"科室\", \"其他\"],\r\n      educationList: [\"大专\", \"本科\", \"硕士\", \"博士\", \"博士后\"],\r\n      province: [],\r\n      city: [],\r\n      district: [],\r\n      provinceValue: \"\",\r\n      cityValue: \"\",\r\n      districtValue: \"\",\r\n      unitLists: [],\r\n      loading: false,\r\n      office: [],\r\n      imgList: [], //封面\r\n      imgList1: [], //头像\r\n    };\r\n  },\r\n  methods: {\r\n    //图片上传\r\n    imgUpload(res, file, fileList) {\r\n      console.log(fileList);\r\n      this.imgList = fileList.map((x) => x.response.data.fileName);\r\n    },\r\n    imgUpload1(res, file, fileList) {\r\n      console.log(fileList);\r\n      this.imgList1 = fileList.map((x) => x.response.data.fileName);\r\n    },\r\n    handleRemove(file, fileList) {\r\n      console.log(file, fileList);\r\n    },\r\n    handlePreview(file) {\r\n      console.log(file);\r\n    },\r\n    handleExceed(files, fileList) {\r\n      this.$message.warning(\r\n        `当前限制选择 1 个文件，本次选择了 ${files.length} 个文件，共选择了 ${\r\n          files.length + fileList.length\r\n        } 个文件`\r\n      );\r\n    },\r\n    beforeRemove(file, fileList) {\r\n      this.imgList1 = [];\r\n      // return this.$confirm(`确定移除 ${file.name}？`);\r\n    },\r\n    getunit() {\r\n      let obj = {\r\n        type: 0,\r\n        city: this.formLabelAlign.city,\r\n        district: this.formLabelAlign.district,\r\n        province: this.formLabelAlign.province,\r\n      };\r\n      unitList(obj).then((res) => {\r\n        if (res.code == 200) {\r\n          this.unitLists = res.data.map((item) => {\r\n            return {\r\n              label: item.name,\r\n              value: item.id,\r\n            };\r\n          });\r\n        }\r\n      });\r\n    },\r\n    //远程搜索会议名称\r\n    remoteMethod(query) {\r\n      if (query !== \"\") {\r\n        this.loading = true;\r\n        let obj = {\r\n          name: query,\r\n          type: 0,\r\n          city: this.formLabelAlign.city,\r\n          district: this.formLabelAlign.district,\r\n          province: this.formLabelAlign.province,\r\n        };\r\n        unitList(obj).then((res) => {\r\n          if (res.code == 200) {\r\n            console.log(res);\r\n            this.loading = false;\r\n            this.unitLists = res.data.map((item) => {\r\n              return {\r\n                label: item.name,\r\n                value: item.id,\r\n              };\r\n            });\r\n          }\r\n        });\r\n      }\r\n    },\r\n    getoffice() {\r\n      let obj = { type: 1,};\r\n      this.loading = true;\r\n      unitList(obj).then((res) => {\r\n        if (res.code == 200) {\r\n          this.loading = false;\r\n            var arr = this.uniqueAr(res.data);\r\n          this.office = arr.map((item) => {\r\n            return {\r\n              label: item.name,\r\n              value: item.id,\r\n            };\r\n          });\r\n        }\r\n      });\r\n    },\r\n    //远程搜索会议名称\r\n    officeRemoteMethod(query) {\r\n      var obj = { name: query, type: 1};\r\n      this.loading = true;\r\n      unitList(obj).then((res) => {\r\n        if (res.code == 200) {\r\n          this.loading = false;\r\n             var arr = this.uniqueAr(res.data);\r\n          this.office = arr.map((item) => {\r\n            return {\r\n              label: item.name,\r\n              value: item.id,\r\n            };\r\n          });\r\n        }\r\n      });\r\n    },\r\n    getarea() {\r\n      area({ pid: 1 }).then((res) => {\r\n        console.log(res);\r\n        this.province = res.data;\r\n      });\r\n    },\r\n    getProvince(x) {\r\n      this.province.forEach((elem) => {\r\n        if (elem.id == x) {\r\n          this.formLabelAlign.province = elem.name;\r\n          this.formLabelAlign.unitAddress = elem.name;\r\n        }\r\n      });\r\n      this.city = [];\r\n      this.district = [];\r\n      this.cityValue = \"\";\r\n      this.districtValue = \"\";\r\n      area({ pid: x }).then((res) => {\r\n        this.city = res.data;\r\n      });\r\n    },\r\n    getCity(x) {\r\n      this.city.forEach((elem) => {\r\n        if (elem.id == x) {\r\n          this.formLabelAlign.city = elem.name;\r\n          this.formLabelAlign.unitAddress =\r\n            this.formLabelAlign.province + elem.name;\r\n        }\r\n      });\r\n      this.district = [];\r\n      this.districtValue = \"\";\r\n      area({ pid: x }).then((res) => {\r\n        this.district = res.data;\r\n      });\r\n    },\r\n    getDistrict(x) {\r\n      this.district.forEach((elem) => {\r\n        if (elem.id == x) {\r\n          this.formLabelAlign.district = elem.name;\r\n          this.formLabelAlign.unitAddress =\r\n            this.formLabelAlign.province + this.formLabelAlign.city + elem.name;\r\n        }\r\n      });\r\n      this.getunit();\r\n    },\r\n    onSubmit() {\r\n      let data = { ...this.formLabelAlign };\r\n      data.header = this.imgList1.length > 0 ? this.imgList1[0] : null;\r\n      let departName = null;\r\n      let unitName = null;\r\n      this.office.forEach((elem) => {\r\n        if (elem.value == data.departId) {\r\n          departName = elem.label;\r\n        }\r\n      });\r\n      this.unitLists.forEach((elem) => {\r\n        if (elem.value == data.unitId) {\r\n          unitName = elem.label;\r\n        }\r\n      });\r\n      data.departName = departName != null ? departName : data.departId;\r\n      data.unitName = unitName != null ? unitName : data.unitId;\r\n      console.log(data);\r\n      sign(data).then((res) => {\r\n        if (res.code == 200) {\r\n          this.$message({\r\n            message: \"注册成功\",\r\n            type: \"success\",\r\n          });\r\n          this.$router.replace(\"/index\");\r\n        } else {\r\n          this.$message.error(res.msg);\r\n        }\r\n      });\r\n    },\r\n     //科室去重\r\n    uniqueAr(arr) {\r\n      for (var i = 0; i < arr.length - 1; i++) {\r\n        for (var j = i + 1; j < arr.length; j++) {\r\n          if (arr[i].name == arr[j].name) {\r\n            arr.splice(j, 1);\r\n            j--;\r\n          }\r\n        }\r\n      }\r\n      return arr;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang='scss' scoped>\r\n$innerWidth: 1200px;\r\n.container {\r\n  background: #e8f0f4;\r\n  overflow: hidden;\r\n  .con {\r\n    ::v-deep .se .el-input {\r\n      width: 130px;\r\n    }\r\n    width: $innerWidth;\r\n    background: #fff;\r\n    border: 1px solid #ddd;\r\n    margin: 10px auto;\r\n    .bread {\r\n      padding: 10px 0 20px 10px;\r\n    }\r\n    .title {\r\n      font-size: 24px;\r\n      color: #465646;\r\n      padding: 40px 0;\r\n      text-align: center;\r\n    }\r\n    .tip {\r\n      font-size: 12px;\r\n      color: #124aa2;\r\n      float: left;\r\n      margin-left: 10px;\r\n    }\r\n    .signLists {\r\n      width: 800px;\r\n      margin: 0 auto;\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}